# 历史项目重构 Claude Skill

这是一个用于历史项目重构的Claude Skill，它通过多个阶段的分析、诊断和规划，帮助用户对历史项目进行系统化的重构，最终实现高质量的代码重构。

## 功能概述

该Skill提供以下功能：

1. **项目现状生成**：客观记录项目当前状态，不包含任何评价或问题判断
2. **项目问题诊断**：识别阻碍项目长期演进的系统性问题
3. **项目重构方案**：针对诊断出的问题，提出具体、可编码、兼容安全的改造方案
4. **模块化重构实施与验证计划**：将重构方案按模块拆解为分阶段实施计划
5. **计划反思与优化**：反思当前计划是否遵循了重构方案文档中的计划，进行必要的调整和优化
6. **模块开发实施**：按照优先级逐一开发需要重构的模块

## 文件结构

```
历史项目重构skill/
├── skill.md              # 主控制文件，定义Skill的流程和行为
├── config.json           # 配置文件，定义工作流程和各阶段之间的转换逻辑
├── README.md             # 使用说明
├── prompts/              # 各阶段的提示词文件
│   ├── phase1_project_overview.md
│   ├── phase2_problem_diagnosis.md
│   ├── phase3_refactoring_plan.md
│   ├── phase4_implementation_plan.md
│   ├── phase5_plan_reflection.md
│   └── phase6_module_development.md
└── docs/                 # 重构过程中生成的文档
    ├── 项目宏观概览报告.md
    ├── 项目级问题诊断报告.md
    ├── 问题优先级矩阵.md
    ├── 重构方案/
    ├── 实施计划/
    └── 优化后实施计划/
```

## 使用方法

1. **准备工作**：
   - 确保您有项目代码库的访问权限
   - 准备项目相关文档（可选）
   - 明确重构需求和目标

2. **启动Skill**：
   - 在Claude中加载该Skill
   - 提供项目代码库访问权限
   - 开始项目现状分析

3. **阶段性工作**：
   - 每个阶段完成后，Skill会生成相应的文档
   - 审阅每个阶段的输出，并提供必要的反馈
   - 确认后进入下一阶段

4. **重构实施**：
   - 确认重构计划后，开始逐模块实施
   - 每个模块按照"代码重构 → 补充测试 → 验证通过"流程进行
   - 验证重构结果是否解决了原有问题

## 注意事项

- 所有输出必须基于用户明确提供的信息，禁止猜测或虚构
- 每个阶段只产生核心交付物，避免内容重叠
- 所有文档使用纯Markdown语法
- 重构过程中严格遵循"代码重构 → 补充测试 → 验证通过"流程
- 只有当前模块所有任务完成后，才可开始下一模块的任务

## 工作流程图

```mermaid
graph TD
    A[开始] --> B[项目现状生成]
    B --> C[项目问题诊断生成]
    C --> D[项目重构方案]
    D --> E[模块化重构实施与验证计划生成]
    E --> F[逐一检查与反思单独模块的计划]
    F --> G{所有模块计划已优化?}
    G -- 否 --> F
    G -- 是 --> H[根据优先级选择模块]
    H --> I[模块开发实施]
    I --> J[代码review与问题验证]
    J --> K{问题已解决?}
    K -- 否 --> I
    K -- 是 --> L{还有待开发模块?}
    L -- 是 --> H
    L -- 否 --> M[结束]